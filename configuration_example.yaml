# Ejemplo de Configuraci√≥n en configuration.yaml
# NOTA: Esta integraci√≥n usa Config Flow (configuraci√≥n mediante UI),
# por lo que NO necesitas agregar nada en configuration.yaml

# Sin embargo, aqu√≠ hay ejemplos de c√≥mo usar las entidades en tu configuraci√≥n:

# ============================================
# EJEMPLO 1: Automatizaci√≥n de Alerta de Lluvia
# ============================================
automation:
  - alias: "Alerta de lluvia alta probabilidad"
    description: "Notifica cuando hay alta probabilidad de lluvia"
    trigger:
      - platform: numeric_state
        entity_id: sensor.google_maps_weather_precipitation_probability
        above: 70
    condition:
      - condition: time
        after: "06:00:00"
        before: "22:00:00"
    action:
      - service: notify.mobile_app_tu_dispositivo
        data:
          title: "üåßÔ∏è Alerta de Lluvia"
          message: >
            Hay un {{ states('sensor.google_maps_weather_precipitation_probability') }}% 
            de probabilidad de lluvia. ¬°No olvides tu paraguas!
          data:
            notification_icon: "mdi:weather-pouring"

# ============================================
# EJEMPLO 2: Automatizaci√≥n de √çndice UV Alto
# ============================================
  - alias: "Alerta de UV alto"
    description: "Notifica cuando el √≠ndice UV es alto"
    trigger:
      - platform: numeric_state
        entity_id: sensor.google_maps_weather_uv_index
        above: 6
    action:
      - service: notify.mobile_app_tu_dispositivo
        data:
          title: "‚òÄÔ∏è √çndice UV Alto"
          message: >
            El √≠ndice UV es {{ states('sensor.google_maps_weather_uv_index') }}. 
            Usa protector solar si vas a salir.

# ============================================
# EJEMPLO 3: Automatizaci√≥n de Tormentas
# ============================================
  - alias: "Alerta de tormenta el√©ctrica"
    description: "Notifica cuando hay alta probabilidad de tormenta"
    trigger:
      - platform: numeric_state
        entity_id: sensor.google_maps_weather_thunderstorm_probability
        above: 50
    action:
      - service: notify.mobile_app_tu_dispositivo
        data:
          title: "‚ö° Alerta de Tormenta"
          message: >
            Hay un {{ states('sensor.google_maps_weather_thunderstorm_probability') }}% 
            de probabilidad de tormenta el√©ctrica.
      - service: light.turn_on
        target:
          entity_id: light.luz_exterior
        data:
          brightness: 255

# ============================================
# EJEMPLO 4: Script para Anuncio del Clima
# ============================================
script:
  anunciar_clima:
    alias: "Anunciar el clima del d√≠a"
    sequence:
      - service: tts.google_translate_say
        data:
          entity_id: media_player.tu_speaker
          message: >
            Buenos d√≠as. La temperatura actual es de 
            {{ state_attr('weather.google_maps_weather', 'temperature') }} grados, 
            con una sensaci√≥n t√©rmica de 
            {{ state_attr('weather.google_maps_weather', 'apparent_temperature') }} grados. 
            El clima est√° {{ states('weather.google_maps_weather') }}. 
            La probabilidad de lluvia es del 
            {{ states('sensor.google_maps_weather_precipitation_probability') }} por ciento.

# ============================================
# EJEMPLO 5: Sensor de Plantilla - Descripci√≥n del Clima
# ============================================
template:
  - sensor:
      - name: "Clima Descriptivo"
        unique_id: clima_descriptivo
        state: >
          {% set temp = state_attr('weather.google_maps_weather', 'temperature') | float %}
          {% set condition = states('weather.google_maps_weather') %}
          {% if temp > 30 %}
            Hace mucho calor
          {% elif temp > 25 %}
            Hace calor
          {% elif temp > 20 %}
            Temperatura agradable
          {% elif temp > 15 %}
            Fresco
          {% elif temp > 10 %}
            Fr√≠o
          {% else %}
            Hace mucho fr√≠o
          {% endif %}
          y el clima est√° {{ condition }}

# ============================================
# EJEMPLO 6: Sensor Binario - ¬øNecesito Paraguas?
# ============================================
  - binary_sensor:
      - name: "Necesito Paraguas"
        unique_id: necesito_paraguas
        state: >
          {{ states('sensor.google_maps_weather_precipitation_probability') | int > 50 }}
        icon: >
          {% if is_state('binary_sensor.necesito_paraguas', 'on') %}
            mdi:umbrella
          {% else %}
            mdi:umbrella-closed
          {% endif %}

# ============================================
# EJEMPLO 7: Lovelace - Tarjetas del Clima
# ============================================
# Agrega esto en tu dashboard de Lovelace:

# Tarjeta principal del clima:
# type: weather-forecast
# entity: weather.google_maps_weather
# show_forecast: true

# Tarjeta de sensores adicionales:
# type: entities
# title: Detalles del Clima
# entities:
#   - entity: sensor.google_maps_weather_uv_index
#     name: √çndice UV
#   - entity: sensor.google_maps_weather_wind_gust
#     name: R√°fagas de Viento
#   - entity: sensor.google_maps_weather_dew_point
#     name: Punto de Roc√≠o
#   - entity: sensor.google_maps_weather_precipitation_probability
#     name: Prob. Precipitaci√≥n
#   - entity: sensor.google_maps_weather_thunderstorm_probability
#     name: Prob. Tormenta
#   - entity: sensor.google_maps_weather_cloud_cover
#     name: Cobertura de Nubes

# Tarjeta condicional - Alerta de UV:
# type: conditional
# conditions:
#   - entity: sensor.google_maps_weather_uv_index
#     state_not: unavailable
#     state_not: unknown
# card:
#   type: markdown
#   content: >
#     {% set uv = states('sensor.google_maps_weather_uv_index') | int %}
#     {% if uv >= 8 %}
#       ‚ö†Ô∏è **√çndice UV Muy Alto** ({{ uv }})
#       
#       Evita la exposici√≥n al sol. Usa protecci√≥n m√°xima.
#     {% elif uv >= 6 %}
#       ‚òÄÔ∏è **√çndice UV Alto** ({{ uv }})
#       
#       Reduce la exposici√≥n al sol. Usa protector solar.
#     {% elif uv >= 3 %}
#       üå§Ô∏è **√çndice UV Moderado** ({{ uv }})
#       
#       Usa protecci√≥n si estar√°s afuera por mucho tiempo.
#     {% else %}
#       ‚úÖ **√çndice UV Bajo** ({{ uv }})
#       
#       Puedes estar al aire libre sin preocupaci√≥n.
#     {% endif %}

# ============================================
# EJEMPLO 8: Automatizaci√≥n de Clima en la Ma√±ana
# ============================================
automation:
  - alias: "Reporte del clima matutino"
    description: "Env√≠a un resumen del clima cada ma√±ana"
    trigger:
      - platform: time
        at: "07:00:00"
    action:
      - service: notify.mobile_app_tu_dispositivo
        data:
          title: "‚òÄÔ∏è Buenos d√≠as"
          message: >
            Temperatura: {{ state_attr('weather.google_maps_weather', 'temperature') }}¬∞C
            (Sensaci√≥n: {{ state_attr('weather.google_maps_weather', 'apparent_temperature') }}¬∞C)
            
            Clima: {{ states('weather.google_maps_weather') }}
            
            Precipitaci√≥n: {{ states('sensor.google_maps_weather_precipitation_probability') }}%
            Viento: {{ state_attr('weather.google_maps_weather', 'wind_speed') }} km/h
            UV: {{ states('sensor.google_maps_weather_uv_index') }}
            
            ¬°Que tengas un excelente d√≠a!

# ============================================
# EJEMPLO 9: Monitoreo de Uso de API
# ============================================
  - alias: "Alerta de uso de API cercano al l√≠mite"
    description: "Notifica si te acercas al l√≠mite gratuito"
    trigger:
      - platform: numeric_state
        entity_id: sensor.google_maps_weather_api_usage_estimate
        above: 900
    action:
      - service: notify.mobile_app_tu_dispositivo
        data:
          title: "‚ö†Ô∏è Advertencia de API"
          message: >
            Tu uso estimado de API es de 
            {{ states('sensor.google_maps_weather_api_usage_estimate') }} llamadas/mes.
            Est√°s cerca del l√≠mite gratuito de 1000 llamadas.
            Considera aumentar el intervalo de actualizaci√≥n.

# Tarjeta de monitoreo de uso de API (para Lovelace):
# type: entities
# title: Uso de API Google Weather
# entities:
#   - entity: sensor.google_maps_weather_api_usage_estimate
#     name: Llamadas Mensuales Estimadas
#   - type: attribute
#     entity: sensor.google_maps_weather_api_usage_estimate
#     attribute: usage_percentage
#     name: Porcentaje del L√≠mite
#   - type: attribute
#     entity: sensor.google_maps_weather_api_usage_estimate
#     attribute: status
#     name: Estado
#   - type: attribute
#     entity: sensor.google_maps_weather_api_usage_estimate
#     attribute: update_interval_display
#     name: Intervalo de Actualizaci√≥n

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. Reemplaza 'tu_dispositivo' con el nombre de tu dispositivo m√≥vil
# 2. Ajusta los umbrales de temperatura, UV, etc. seg√∫n tus preferencias
# 3. Personaliza los mensajes de notificaci√≥n a tu gusto
# 4. Puedes combinar m√∫ltiples condiciones para automatizaciones m√°s complejas
